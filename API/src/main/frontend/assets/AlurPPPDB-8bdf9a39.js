import{o as C,j as e,b3 as I,S as P,d as A,t as K,b4 as O,aH as R,k as T,av as U,r as D,b as J,p as k,q as V,a9 as W,B as X,b5 as v,aa as Y,c as Z,P as ee,h as te,a6 as se,v as ae,b2 as ne,A as B,b6 as oe,b7 as le,_ as m}from"./index-af637abb.js";import{G as re}from"./getAlur-1f341ac3.js";const ie=async a=>(await C.post("/v1/admin/alur-ppdb/post",a)).data,ce=async a=>(console.log(a),(await C.delete("/v1/admin/alur-ppdb/delete?id="+a.id)).data),de=async a=>{const n={title:a.title,content:a.content};return(await C.put("/v1/admin/alur-ppdb/update?dataId="+a.id,n)).data},ue=({opened:a,close:n,title:l,setTitle:o,descAlurPPDB:c,setDescAlurPPDB:r,tambahALurHandler:i,createAlurMutation:d})=>e.jsx(I,{size:"70rem",onClose:n,opened:a,title:"Tambah Alur Pendaftaran PPDB",withFooter:!0,onAccept:{acceptFn:i,titleAccept:"Tambah"},loading:d.status==="pending",children:e.jsxs(P,{p:20,pb:"6rem",children:[e.jsx(A,{align:"left",weight:"bold",children:"Nama"}),e.jsx(K,{value:l,onChange:u=>o(u.target.value)}),e.jsx(A,{align:"left",mt:30,weight:"bold",children:"Deskripsi Keterangan"}),e.jsx(O,{desc:c,setDesc:r})]})}),pe=({opened:a,close:n,title:l,setTitle:o,descAlurPPDB:c,setDescAlurPPDB:r,editAlurHandler:i,editAlurMutation:d,setIdAlur:u})=>e.jsx(I,{size:"70rem",onClose:()=>{n(),r(""),o(""),u("")},opened:a,title:"Edit Alur Pendaftaran PPDB",withFooter:!0,onAccept:{acceptFn:i,titleAccept:"Ubah"},children:e.jsxs(P,{p:20,pb:"6rem",children:[e.jsx(A,{align:"left",weight:"bold",children:"Nama"}),e.jsx(K,{value:l,onChange:p=>o(p.target.value)}),e.jsx(A,{align:"left",mt:30,weight:"bold",children:"Deskripsi Keterangan"}),e.jsx(O,{desc:c,setDesc:r})]})}),ge=()=>{var w;const a=R(),[n,{open:l,close:o}]=T(!1),[c,{open:r,close:i}]=T(!1),d=U(),[u,p]=D.useState(null),[j,h]=D.useState(""),[f,x]=D.useState(""),{data:g,isError:M,isLoading:N,refetch:y}=J({queryKey:["get_all_alur"],queryFn:re}),E=k({mutationFn:ie}),F=k({mutationFn:ce}),S=k({mutationFn:de}),_=s=>{E.mutate(s,{onSuccess:t=>{console.log("Success"),console.log(t),m.success("Data berhasil ditambahkan"),h(""),x(""),o(),d.invalidateQueries({queryKey:["get_all_alur"]})},onError:t=>{var b;((b=t==null?void 0:t.response)==null?void 0:b.status)===400&&(console.log("DATA TIDAK BOLEH KOSONG"),m.error("Data tidak boleh kosong"))}})},q=s=>{S.mutate(s,{onSuccess:t=>{console.log(t),console.log("Success"),m.success("Data berhasil diubah"),p(""),h(""),x(""),i(),y(),d.invalidateQueries({queryKey:["get_all_alur"]})},onError:t=>{var b;((b=t==null?void 0:t.response)==null?void 0:b.status)===400&&(console.log("DATA TIDAK BOLEH KOSONG"),m.error("Data tidak boleh kosong"))}})},z=s=>{F.mutate(s,{onSuccess:t=>{console.log(t),console.log("Success"),m.success("Data berhasil dihapus"),close(),y()},onError:t=>{console.log("FAILED"),console.log(t)}})};if(M)return e.jsx("h1",{children:"Terjadi Kesalahan"});const L=()=>{_({content:f,title:j})};function H(s){z({id:s})}function G(){q({content:f,id:u,title:j})}function Q({propss:s,data:t}){return e.jsxs(ne,{children:[e.jsx(v.Control,{...s,className:"font-bold"}),e.jsxs("div",{style:{paddingInline:"16px",display:"flex",gap:"8px"},children:[e.jsx(B,{className:"bg-[#2A166F] hover:bg-[#2A166F]",variant:"filled",size:40,radius:100,onClick:()=>{p(t.id),h(t.title),x(t.content),r()},children:e.jsx(oe,{size:20})}),e.jsx(B,{className:"bg-[#2A166F] hover:bg-[#2A166F]",variant:"filled",color:"blue",size:40,radius:100,onClick:()=>H(t.id),children:e.jsx(le,{size:20})})]})]})}return e.jsxs(V,{title:"Alur Pendaftaran",children:[e.jsx(W,{label:"Alur Pendaftaran"}),e.jsxs(P,{className:"style-box max-w-[70rem] mx-auto",children:[e.jsxs(X,{mt:50,sx:{display:"flex",flexDirection:"column",gap:"16px",paddingBottom:"40px"},children:[e.jsx(v,{multiple:!0,variant:"separated",chevronPosition:"left",children:N?e.jsx(e.Fragment,{children:e.jsx(Y,{height:80})}):g&&((w=g==null?void 0:g.data)==null?void 0:w.length)>0?g.data.map(s=>e.jsxs(v.Item,{value:s.id.toString(),sx:{boxShadow:"0 4px 10px -6px black",backgroundColor:`${a?"#25262B":"white"}`,padding:"0.5rem 0.5rem",border:"0.0625rem solid #dee2e6"},styles:{item:{backgroundColor:"blue"}},children:[e.jsx(Q,{propss:{id:s.id.toString(),children:e.jsx("h2",{children:s.title})},data:s}),e.jsx(v.Panel,{sx:{borderTop:`1px solid ${a?"gray":"#d9d9d9"}`},children:e.jsx(Z,{desc:s.content})})]},s.id)):e.jsx(ee,{withBorder:!0,p:"lg",shadow:"lg",children:e.jsx(A,{size:"lg",weight:"bold",children:"Data kosong"})})}),e.jsx(te,{mt:40,onClick:l,children:"Tambah"})]}),e.jsx(ue,{close:o,createAlurMutation:E,descAlurPPDB:f,opened:n,setDescAlurPPDB:x,setTitle:h,tambahALurHandler:L,title:j}),e.jsx(pe,{opened:c,close:i,title:j,setTitle:h,descAlurPPDB:f,setDescAlurPPDB:x,setIdAlur:p,editAlurHandler:G,editAlurMutation:S}),e.jsx(se,{visible:F.status==="pending",overlayBlur:1}),e.jsx(ae,{position:"top-center",reverseOrder:!1})]})]})};export{ge as default};

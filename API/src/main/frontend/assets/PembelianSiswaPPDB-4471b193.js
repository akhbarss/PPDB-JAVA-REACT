import{r as d,b as f,e as S,g as y,j as s,q as P,a9 as j,S as k,aa as m,D as h,v as w,ab as v,ac as C,ad as F,ae as E}from"./index-af637abb.js";import{u as L,g as T,T as I,S as _,F as B,a as D,b as M,c as N,d as R}from"./StepPilihJurusan-123914be.js";import"./ResponseError-29415470.js";import"./FormWrapper-eff541c3.js";const A=t=>s.jsx(v,{unstyled:!0,styles:a=>({tab:{...a.fn.focusStyles(),backgroundColor:a.colorScheme==="dark"?a.colors.dark[6]:a.white,color:a.colorScheme==="dark"?"white":a.colors.gray[9],border:"none",boxShadow:"0 10px 20px -10px rgba(0,0,0,0.2)",cursor:"pointer",fontSize:a.fontSizes.sm,borderRadius:"5px","&:disabled":{cursor:"not-allowed",color:a.colorScheme==="dark"?a.colors.gray[4]:a.colors.gray[8],backgroundColor:a.colorScheme==="dark"?a.colors.dark[6]:a.colors.gray[4]},"&[data-active]":{background:"linear-gradient(45deg, #4c6ef5 0%, #15aabf 100%)",borderColor:a.colors.blue[7],color:a.white,boxShadow:"0 10px 20px -10px rgba(0,0,0,0.5)"}},tabsList:{overflowX:"auto"}}),...t}),b=[{index:1,label:"Pilih Gelombang PPDB",icon:C,content:s.jsx(_,{type:"PEMBELIAN"})},{index:2,label:"Transaksi Pembelian",icon:B,content:s.jsx(D,{})},{index:3,label:"Pilih Jurusan",icon:F,content:s.jsx(M,{})},{index:4,label:"Cetak Kartu Peserta",icon:E,content:s.jsx(N,{})}],z=()=>{var x;const[t,a]=d.useState({step:1,stagingId:null}),{data:n,isLoading:u,isSuccess:c}=f({queryKey:["get_last_offset_batch"],queryFn:()=>R("PEMBELIAN"),staleTime:0,notifyOnChangeProps:"all"}),r=L(t),g=S(),p=y();d.useEffect(()=>{a(r==null?void 0:r.initialValues)},[r]),d.useEffect(()=>{if(c){const e=n.data.filter(o=>o.is_done===1);if(e.length>0)if(n.data[n.data.length-1].index!==e[e.length-1].index){const o=e[e.length-1].index+1;i(o.toString())}else i(e[e.length-1].index.toString());else i("1")}},[n,c]);const i=e=>{const o={step:+e,stagingId:n.data.find(l=>l.index===+e).id};a(o),p(`${g.pathname}?${T(o)}`)};return s.jsxs(P,{title:"Pembelian",children:[s.jsx(j,{label:"Pembelian"}),s.jsx(k,{className:"style-box max-w-[70rem] mx-auto",children:s.jsxs(A,{value:`${t.step}`,onTabChange:i,children:[u&&s.jsx(m,{width:"100%"}),c&&s.jsx(I,{activeTabIndex:+t.step,card:n.data.map((e,o)=>{var l;return{label:e.name,index:e.index,icon:(l=b[o])==null?void 0:l.icon,is_done:e.is_done===1}})}),s.jsx(h,{my:20}),(x=b.find(e=>e.index===t.step))==null?void 0:x.content]})}),s.jsx(w,{position:"top-center",reverseOrder:!1})]})};export{z as default};

import{ap as S,r as x,d as P,e as h,g as y,j as t,t as k,ax as m,S as w,D as F,ay as j,az as C,aA as u,aB as I}from"./index-3e481e45.js";import{u as v,a as g,S as E,T as B,F as L,b as T}from"./generateQueryParam-9904d659.js";import{R as $}from"./ResponseError-74c4bd0b.js";import"./index.esm-97959c20.js";function D(n){return S({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.64 64.58C313.18 43.57 286 32 256 32c-30.16 0-57.43 11.5-76.8 32.38-19.58 21.11-29.12 49.8-26.88 80.78C156.76 206.28 203.27 256 256 256s99.16-49.71 103.67-110.82c2.27-30.7-7.33-59.33-27.03-80.6zM432 480H80a31 31 0 01-24.2-11.13c-6.5-7.77-9.12-18.38-7.18-29.11C57.06 392.94 83.4 353.61 124.8 326c36.78-24.51 83.37-38 131.2-38s94.42 13.5 131.2 38c41.4 27.6 67.74 66.93 76.18 113.75 1.94 10.73-.68 21.34-7.18 29.11A31 31 0 01432 480z"}}]})(n)}function R(n){return t.jsx(j,{unstyled:!0,styles:a=>({tab:{...a.fn.focusStyles(),backgroundColor:a.colorScheme==="dark"?a.colors.dark[6]:a.white,color:a.colorScheme==="dark"?"white":a.colors.gray[9],border:"none",boxShadow:"0 10px 20px -10px rgba(0,0,0,0.2)",cursor:"pointer",fontSize:a.fontSizes.sm,borderRadius:"5px","&:disabled":{cursor:"not-allowed",color:a.colorScheme==="dark"?a.colors.gray[4]:a.colors.gray[8],backgroundColor:a.colorScheme==="dark"?a.colors.dark[6]:a.colors.gray[4]},"&[data-active]":{background:"linear-gradient(45deg, #4c6ef5 0%, #15aabf 100%)",borderColor:a.colors.blue[7],color:a.white,boxShadow:"0 10px 20px -10px rgba(0,0,0,0.5)"}},tabsList:{overflowX:"auto"},panel:{}}),...n})}const _=[{index:1,label:"Pilih Jalur PPDB",icon:C},{index:2,label:"Transaksi Pengembalian",icon:L},{index:3,label:"Isi Biodata",icon:D},{index:4,label:"Pilih Jurusan",icon:u},{index:5,label:"Isi Data Prestasi",icon:u},{index:6,label:"Cetak Kartu Peserta",icon:I}],G=()=>{const[n,a]=x.useState({step:1,stagingId:null}),{data:o,isLoading:b,isSuccess:l}=P({queryKey:["get_last_offset_batch"],queryFn:()=>T("PENGEMBALIAN"),throwOnError:e=>$(e)}),i=v(n),d=h(),c=y();x.useEffect(()=>{a(i==null?void 0:i.initialValues)},[i]),x.useEffect(()=>{if(l){const e=o.data.filter(s=>s.is_done===1);if(e.length>0){if(o.data[o.data.length-1].index!==e[e.length-1].index){const s=e[e.length-1].index+1,r={step:s,stagingId:o.data.find(f=>f.index===s).id};a(r),c(`${d.pathname}?${g(r)}`)}}else{const s={step:1,stagingId:o.data.find(r=>r.index===1).id};a(s),c(`${d.pathname}?${g(s)}`)}}},[o,l]);const p=e=>{const s={step:+e,stagingId:o.data.find(r=>r.index===+e).id};c(`${d.pathname}?${g(s)}`)};return t.jsxs(k,{title:"Pengembalian",children:[t.jsx(m,{label:"Pengembalian"}),t.jsx(w,{className:"style-box",children:t.jsxs(R,{value:`${n.step}`,onTabChange:p,children:[b&&t.jsx(E,{width:"100%"}),l&&t.jsx(B,{activeTabIndex:+n.step,card:o.data.map(e=>({label:e.name,index:e.index,icon:_.find(s=>s.index===e.index).icon,is_done:e.is_done===1}))}),t.jsx(F,{mt:20})]})})]})};export{G as default};

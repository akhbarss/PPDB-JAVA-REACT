import{k as F,j as e,aL as U,S as H,c as y,p as I,m as X,a as Y,aj as Z,aO as ee,aA as _,r as W,b as ae,l as q,B as z,P as se,f as v,T as G,aI as te,G as S,A as N,aM as ie,aN as ne,_ as A,aP as le,aD as re,aQ as R,N as pe,o as he,D as me}from"./index-7cb0f30c.js";import{T as oe}from"./tiptapInput-dac4c74c.js";import{T as xe}from"./tiptapOutput-471c97c6.js";import{F as ce}from"./Flex-19fefdff.js";import{A as f,C as de}from"./index.esm-74ecb24c.js";import"./index.esm-2b1cd2c0.js";import"./createReactComponent-850715e9.js";import"./Tooltip-9cc1d666.js";import"./SimpleGrid-44ad311c.js";const ge=async t=>(await F.post("/v1/admin/registration-info/post",t)).data,be=async t=>(await F.delete("/v1/admin/registration-info/delete?id="+t.id)).data,je=async t=>{const{description:i,idKeterangan:d,index:g,name:a}=t,m={description:i,index:g,name:a};return(await F.patch("/v1/admin/registration-info/update?id="+d,m)).data},ye=async t=>(await F.get("/v1/admin/registration-info/index?regisPathsId="+t)).data,ke=({opened:t,close:i,titleModal:d,description:g,setDescription:a,name:m,setName:j,tambahKeteranganHandler:C,loading:c})=>e.jsx(U,{size:"60rem",onClose:i,opened:t,title:d,onAccept:{acceptFn:C,titleAccept:"Tambah"},withFooter:!0,loading:c,children:e.jsxs(H,{mt:"3rem",mb:"6rem",sx:{paddingInline:"2rem",minHeight:"50vh"},children:[e.jsx(y,{align:"left",weight:"bold",children:"Nama"}),e.jsx(I,{value:m,onChange:o=>j(o.target.value)}),e.jsx(y,{align:"left",mt:30,weight:"bold",children:"Deskripsi Keterangan"}),e.jsx(oe,{desc:g,setDesc:a})]})}),De=({opened:t,close:i,titleModal:d,description:g,setDescription:a,name:m,setName:j,editKeteranganHandler:C,loading:c})=>e.jsx(U,{size:"70rem",onClose:i,opened:t,title:d,onAccept:{acceptFn:C,titleAccept:"Ubah"},withFooter:!0,loading:c,children:e.jsxs(H,{p:20,pb:"6rem",mt:"3rem",children:[e.jsx(y,{align:"left",weight:"bold",children:"Nama"}),e.jsx(I,{value:m,onChange:o=>j(o.target.value)}),e.jsx(y,{align:"left",mt:30,weight:"bold",children:"Deskripsi Keterangan"}),e.jsx(oe,{desc:g,setDesc:a})]})}),Te=()=>{var E;const t=X(),i=Y(),d=Z(),{idJalurPendaftaran:g}=ee(),[a,{open:m,close:j}]=_(!1),[C,{open:c,close:o}]=_(!1),[k,{open:x,close:T}]=_(!1),[u,b]=W.useState(null),[B,p]=W.useState(""),[P,K]=W.useState(""),{data:w}=ae({queryKey:["get_all_keterangan"],queryFn:()=>ye(+g)}),$=q({mutationFn:ge}),O=q({mutationFn:be}),L=q({mutationFn:je}),J=r=>{$.mutate(r,{onSuccess:n=>{console.log(n),p(""),K(""),j(),A.success("Data berhasil ditambahkan"),d.invalidateQueries({queryKey:["get_all_keterangan"]})},onError:n=>{var M;((M=n==null?void 0:n.response)==null?void 0:M.status)===400&&(console.log("DATA TIDAK BOLEH KOSONG"),A.error("Data tidak boleh kosong"))}})},V=r=>{O.mutate(r,{onSuccess:n=>{console.log(n),p(""),b(null),A.success("Data berhasil dihapus"),d.invalidateQueries({queryKey:["get_all_keterangan"]}),T()},onError:n=>{console.log(n)}})},Q=r=>{L.mutate(r,{onSuccess:n=>{console.log(n),b(null),p(""),K(""),o(),A.success("Data berhasil diubah"),d.invalidateQueries({queryKey:["get_all_keterangan"]})},onError:n=>{var M;((M=n==null?void 0:n.response)==null?void 0:M.status)===400&&(console.log("DATA TIDAK BOLEH KOSONG"),A.error("Data tidak boleh kosong"))}})};function l(){const r={description:P,index:"1",name:B,path_id:+g};J(r)}function s(r){V({id:r})}function D(){Q({name:B,description:P,idKeterangan:u,index:"1"})}function h({propss:r,data:n}){return e.jsxs(de,{children:[e.jsx(f.Control,{...r,className:"font-bold"}),e.jsxs("div",{style:{paddingInline:"16px",display:"flex",gap:"8px"},children:[e.jsx(N,{variant:"filled",className:"bg-[#2A166F] hover:bg-[#2A166F]",size:40,radius:100,onClick:()=>{c(),b(n.id),p(n.name),K(n.description)},children:e.jsx(ie,{size:20})}),e.jsx(N,{variant:"filled",color:"#2A166F",className:"bg-[#2A166F] hover:bg-[#2A166F]",size:40,radius:100,onClick:()=>{x(),b(n.id),p(n.name)},children:e.jsx(ne,{size:20})})]})]})}return e.jsxs(z,{sx:{flex:"1"},children:[e.jsx(se,{withBorder:!0,shadow:"sm",radius:"4rem",px:"2.5rem",py:"1rem",bg:t?i.colors.dark[8]:"white",children:e.jsxs(ce,{justify:"space-between",align:"center",children:[e.jsx(y,{weight:"bold",size:"xl",children:"Keterangan"}),e.jsx(v,{onClick:m,children:"Tambah"})]})}),(w==null?void 0:w.data)&&((E=w==null?void 0:w.data)==null?void 0:E.length)>0&&e.jsx(f,{multiple:!0,variant:"separated",chevronPosition:"left",mt:30,mb:50,children:w&&w.data.sort((r,n)=>r.id-n.id).map(r=>e.jsxs(f.Item,{mb:15,value:r.id.toString(),sx:{boxShadow:"0 4px 10px -6px black",backgroundColor:`${t?i.colors.dark[9]:"white"}`,padding:"0.5rem 0.5rem",border:"0.0625rem solid #dee2e6","&[data-active]":{backgroundColor:t?i.colors.dark[9]:"white",border:"0.0625rem solid #dee2e6"}},children:[e.jsx(h,{propss:{id:"item.id.toString()",children:e.jsx(G,{order:3,children:r.name})},data:r}),e.jsx(f.Panel,{sx:{borderTop:`1px solid ${t?"gray":"#d9d9d9"}`},children:e.jsx(xe,{desc:r.description})})]},r.id))}),e.jsx(ke,{close:()=>{j(),b(null),p(""),K("")},description:P,opened:a,setDescription:K,setName:p,tambahKeteranganHandler:l,titleModal:"Tambah Keterangan",name:B,loading:$.status==="pending"}),e.jsx(De,{close:()=>{o(),b(null),p(""),K("")},description:P,editKeteranganHandler:D,name:B,opened:C,setDescription:K,setName:p,titleModal:"Ubah Keterangan",loading:L.status==="pending"}),e.jsxs(te,{centered:!0,closeOnEscape:!1,closeOnClickOutside:!1,withCloseButton:!1,opened:k,onClose:()=>{T(),p(""),b(null)},children:[e.jsx(G,{order:3,children:"Hapus keterangan"}),e.jsxs(y,{mt:20,children:["Anda yakin ingin menghapus keterangan ",B]}),e.jsxs(S,{mt:20,position:"right",children:[e.jsx(v,{disabled:O.status==="pending",variant:"outline",onClick:()=>{T(),p(""),b(null)},children:"Batal"}),e.jsx(v,{variant:"danger",onClick:()=>s(u),loading:O.status==="pending",children:"Hapus"})]})]})]})},ve=async t=>(await F.post("/v1/admin/additional-prices/post",t)).data,Ce=async t=>(await F.delete("/v1/admin/additional-prices/delete?id="+t.id)).data,Be=async t=>{const{namePrice:i,id:d,priceDetails:g}=t,a={namePrice:i,priceDetails:g};return(await F.patch("/v1/admin/additional-prices/update?id="+d,a)).data},we=async t=>(await F.get("/v1/admin/additional-prices/index?pathId="+t)).data,Ae=({opened:t,close:i,titleModal:d,tambahBiayaTambahanHandler:g,form:a,loading:m})=>{const j=a.values.priceDetails.map((c,o)=>e.jsxs(z,{children:[e.jsxs(y,{weight:"bold",sx:{flex:1},children:["Nama ",o+1]}),e.jsxs(S,{mt:"xs",children:[e.jsx(I,{placeholder:`Gelombang ${o+1}`,required:!0,withAsterisk:!0,sx:{flex:1},...a.getInputProps(`priceDetails.${o}.name`)}),o>0&&e.jsx(N,{color:"red",variant:"filled",size:30,onClick:()=>a==null?void 0:a.removeListItem("priceDetails",o),children:e.jsx(le,{size:"1rem"})})]}),e.jsxs(y,{weight:"bold",sx:{flex:1},mt:"xs",children:["Biaya ",o+1]}),e.jsx(re,{mt:"xs",thousandSeparator:".",required:!0,decimalSeparator:",",prefix:"Rp. ",customInput:I,placeholder:"Rp. 0",sx:{flex:1},withAsterisk:!0,...a.getInputProps(`priceDetails.${o}.biaya`)})]},c.key));function C(c){const{priceDetails:o,judulBiaya:k}=c,x=o.map(T=>({subTitle:T.name,price:T.biaya.substring(4).replace(/\./g,"")}));g({namePrice:k,priceDetails:x})}return e.jsx(U,{size:"50rem",onClose:i,opened:t,title:d,onAccept:{acceptFn:()=>console.log("submit")},withFooter:!1,children:e.jsxs("form",{onSubmit:a.onSubmit(c=>C(c)),children:[e.jsxs(H,{p:20,pb:"6rem",sx:{minHeight:"50vh"},spacing:"2rem",children:[e.jsxs(z,{children:[e.jsx(y,{align:"left",weight:"bold",children:"Judul Biaya"}),e.jsx(I,{mt:"xs",required:!0,...a.getInputProps("judulBiaya")})]}),j,e.jsx(S,{position:"center",mt:"md",children:e.jsx(v,{onClick:()=>a.insertListItem("priceDetails",{name:"",biaya:"",key:R()}),children:"Tambah Biaya"})})]}),e.jsxs(S,{position:"right",sx:c=>({position:"absolute",bottom:0,right:0,left:0,padding:"1rem 4rem",backgroundColor:c.colorScheme==="dark"?"black":"whitesmoke",zIndex:1}),children:[e.jsx(v,{variant:"outline",onClick:()=>{i()},disabled:m,children:"Batal"}),e.jsx(v,{type:"submit",loading:m,children:"Tambah"})]})]})})},Ke=({opened:t,close:i,titleModal:d,editBiayaTambahanHandler:g,form:a,loading:m})=>{var c,o;const j=(o=(c=a==null?void 0:a.values)==null?void 0:c.priceDetails)==null?void 0:o.map((k,x)=>e.jsxs(z,{children:[e.jsxs(y,{weight:"bold",sx:{flex:1},children:["Nama ",x+1]}),e.jsxs(S,{mt:"xs",children:[e.jsx(I,{placeholder:`Gelombang ${x+1}`,required:!0,withAsterisk:!0,sx:{flex:1},...a==null?void 0:a.getInputProps(`priceDetails.${x}.name`)}),x>0&&e.jsx(N,{color:"red",variant:"filled",size:30,onClick:()=>a==null?void 0:a.removeListItem("priceDetails",x),children:e.jsx(le,{size:"1rem"})})]}),e.jsxs(y,{weight:"bold",sx:{flex:1},mt:"xs",children:["Biaya ",x+1]}),e.jsx(re,{mt:"xs",thousandSeparator:".",required:!0,decimalSeparator:",",prefix:"Rp. ",customInput:I,placeholder:"Rp. 0",sx:{flex:1},withAsterisk:!0,...a==null?void 0:a.getInputProps(`priceDetails.${x}.biaya`)})]},k.key));function C(k){const{priceDetails:x,judulBiaya:T,id:u}=k,b=x.map(B=>{var p;return{subTitle:B.name,price:(p=B.biaya)==null?void 0:p.substring(4).replace(/\./g,"")}});g({id:u,namePrice:T,priceDetails:b})}return e.jsx(U,{size:"50rem",onClose:i,opened:t,title:d,withFooter:!1,children:e.jsxs("form",{onSubmit:a==null?void 0:a.onSubmit(k=>C(k)),children:[e.jsxs(H,{p:20,pb:"6rem",sx:{minHeight:"50vh"},spacing:"2rem",children:[e.jsxs(z,{children:[e.jsx(y,{align:"left",weight:"bold",children:"Judul Biaya"}),e.jsx(I,{mt:"xs",required:!0,...a==null?void 0:a.getInputProps("judulBiaya")})]}),j&&j,e.jsx(S,{position:"center",mt:"md",children:e.jsx(v,{onClick:()=>a==null?void 0:a.insertListItem("priceDetails",{name:"",biaya:"",key:R()}),children:"Tambah Biaya"})})]}),e.jsxs(S,{position:"right",sx:k=>({position:"absolute",bottom:0,right:0,left:0,padding:"1rem 4rem",backgroundColor:k.colorScheme==="dark"?"black":"whitesmoke",zIndex:1}),children:[e.jsx(v,{variant:"outline",onClick:()=>{i()},disabled:m,children:"Batal"}),e.jsx(v,{type:"submit",loading:m,children:"Ubah"})]})]})})},fe=()=>{var Q;const t=X(),i=Y(),{idJalurPendaftaran:d}=ee(),[g,{open:a,close:m}]=_(!1),[j,{open:C,close:c}]=_(!1),[o,{open:k,close:x}]=_(!1),T=Z(),u=pe({initialValues:{id:0,judulBiaya:"",priceDetails:[{name:"",biaya:"",key:R()}]}}),{data:b}=ae({queryKey:["get_all_biaya_tambahan"],queryFn:()=>we(+d)}),B=q({mutationFn:ve}),p=q({mutationFn:Ce}),P=q({mutationFn:Be}),K=l=>{B.mutate(l,{onSuccess:s=>{console.log("Success"),console.log(s),m(),A.success("Data berhasil dtambahkan"),u.reset(),T.invalidateQueries({queryKey:["get_all_biaya_tambahan"]})},onError:s=>{var h;((h=s==null?void 0:s.response)==null?void 0:h.status)===400&&(console.log("DATA TIDAK BOLEH KOSONG"),A.error("Data tidak boleh kosong"))}})},w=l=>{p.mutate(l,{onSuccess:s=>{console.log(s),x(),A.success("Data berhasil dihapus"),T.invalidateQueries({queryKey:["get_all_biaya_tambahan"]}),u.reset()},onError:s=>{console.log("FAILED"),console.log(s)}})},$=l=>{P.mutate(l,{onSuccess:s=>{console.log(s),c(),A.success("Data berhasil diubah"),u.reset(),T.invalidateQueries({queryKey:["get_all_biaya_tambahan"]})},onError:s=>{var h;console.log(s),((h=s==null?void 0:s.response)==null?void 0:h.status)===400&&(console.log("DATA TIDAK BOLEH KOSONG"),A.error("Data tidak boleh kosong"))}})};function O(l){const{namePrice:s,priceDetails:D}=l,h=D.map(r=>({subTitle:r.subTitle,price:+r.price})),E={namePrice:s,path_id:+d,priceDetails:h};K(E)}function L(l){w({id:l})}function J(l){const{id:s,namePrice:D,priceDetails:h}=l,E=h.map(n=>({subTitle:n.subTitle,price:+n.price}));$({id:s,namePrice:D,priceDetails:E})}function V({propss:l,data:s}){return e.jsxs(de,{children:[e.jsx(f.Control,{...l,className:"font-bold"}),e.jsxs("div",{style:{paddingInline:"16px",display:"flex",gap:"8px"},children:[e.jsx(N,{variant:"filled",className:"bg-[#2A166F] hover:bg-[#2A166F]",size:40,radius:100,onClick:()=>{const D=s==null?void 0:s.priceDetails.map(h=>({name:h.subTitle,biaya:`Rp. ${h.price}`,key:R()}));u.setValues({id:s.id,judulBiaya:s.namePrice,priceDetails:D}),C()},children:e.jsx(ie,{size:20})}),e.jsx(N,{variant:"filled",color:"#2A166F",className:"bg-[#2A166F] hover:bg-[#2A166F]",size:40,radius:100,onClick:()=>{k(),u.setValues({id:s.id,judulBiaya:s.namePrice})},children:e.jsx(ne,{size:20})})]})]})}return e.jsxs(z,{sx:{flex:"1"},children:[e.jsx(se,{withBorder:!0,shadow:"sm",radius:"4rem",px:"2.5rem",bg:t?i.colors.dark[8]:"white",sx:{padding:"1rem"},children:e.jsxs(ce,{justify:"space-between",align:"center",children:[e.jsx(y,{weight:"bold",size:"xl",children:"Biaya Tambahan"}),e.jsx(v,{onClick:a,children:"Tambah"})]})}),e.jsx(f,{mt:30,mb:50,multiple:!0,variant:"separated",chevronPosition:"left",children:b&&((Q=b==null?void 0:b.data)==null?void 0:Q.sort((l,s)=>l.id-s.id).map(l=>{const s=l.priceDetails;return e.jsxs(f.Item,{mb:15,value:l.id.toString(),sx:{boxShadow:"0 4px 10px -6px black",backgroundColor:`${t?i.colors.dark[9]:"white"}`,padding:"0.5rem 0.5rem",border:"0.0625rem solid #dee2e6","&[data-active]":{backgroundColor:t?i.colors.dark[9]:"white",border:"0.0625rem solid #dee2e6"}},children:[e.jsx(V,{propss:{id:l.id.toString(),children:e.jsx(G,{order:3,children:l.namePrice})},data:l}),e.jsx(f.Panel,{sx:{borderTop:`1px solid ${t?"gray":"#d9d9d9"}`},children:e.jsx("table",{className:"w-full text-left  p-5",children:e.jsx("tbody",{children:s.map(D=>{const h=D.price;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-4",children:D.subTitle}),e.jsx("td",{children:h==null?void 0:h.toLocaleString("id-ID",{style:"currency",currency:"IDR"}).slice(0,-3)})]},D.id)})})})})]},l.id)}))}),e.jsx(Ae,{form:u,close:()=>{m(),u.reset()},opened:g,tambahBiayaTambahanHandler:O,titleModal:"Tambah Biaya Tambahan",loading:B.status==="pending"}),e.jsx(Ke,{form:u,opened:j,close:()=>{c(),u.reset()},editBiayaTambahanHandler:J,titleModal:"Ubah Biaya Tambahan",loading:P.status==="pending"}),e.jsxs(te,{centered:!0,closeOnEscape:!1,closeOnClickOutside:!1,withCloseButton:!1,opened:o,onClose:()=>{x(),u.reset()},children:[e.jsx(G,{order:3,children:"Hapus Biaya Tambahan"}),e.jsxs(y,{mt:20,children:["Anda yakin ingin menghapus biaya tambahan ",u.values.judulBiaya,"?"]}),e.jsxs(S,{mt:20,position:"right",children:[e.jsx(v,{disabled:p.status==="pending",variant:"outline",onClick:()=>{x(),u.reset()},children:"Batal"}),e.jsx(v,{variant:"danger",onClick:()=>L(u.values.id),loading:p.status==="pending",children:"Hapus"})]})]})]})},Oe=()=>e.jsx(he,{title:"Informasi Umum",children:e.jsxs(H,{children:[e.jsx(Te,{}),e.jsx(me,{}),e.jsx(fe,{})]})});export{Oe as default};

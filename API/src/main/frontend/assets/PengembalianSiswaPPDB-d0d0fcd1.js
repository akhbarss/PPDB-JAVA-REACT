import{ag as y,r as x,d as P,e as I,g as h,j as t,t as j,ab as m,S as k,D as v,I as E,ac as C,ad as F,ae as w,af as A}from"./index-25fc8057.js";import{a as L,b as g,d as N,T as B,e as M,F as T,f as G,h as $,i as D}from"./StepCetakKartu-8e4e0176.js";import"./DataTable-c63220a7.js";import"./Card-b53f8c6e.js";import"./ResponseError-cf042987.js";import"./LoadingOverlay-f52f64e8.js";import"./FormWrapper-7b64f918.js";function _(n){return y({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.64 64.58C313.18 43.57 286 32 256 32c-30.16 0-57.43 11.5-76.8 32.38-19.58 21.11-29.12 49.8-26.88 80.78C156.76 206.28 203.27 256 256 256s99.16-49.71 103.67-110.82c2.27-30.7-7.33-59.33-27.03-80.6zM432 480H80a31 31 0 01-24.2-11.13c-6.5-7.77-9.12-18.38-7.18-29.11C57.06 392.94 83.4 353.61 124.8 326c36.78-24.51 83.37-38 131.2-38s94.42 13.5 131.2 38c41.4 27.6 67.74 66.93 76.18 113.75 1.94 10.73-.68 21.34-7.18 29.11A31 31 0 01432 480z"}}]})(n)}function z(n){return t.jsx(C,{unstyled:!0,styles:a=>({tab:{...a.fn.focusStyles(),backgroundColor:a.colorScheme==="dark"?a.colors.dark[6]:a.white,color:a.colorScheme==="dark"?"white":a.colors.gray[9],border:"none",boxShadow:"0 10px 20px -10px rgba(0,0,0,0.2)",cursor:"pointer",fontSize:a.fontSizes.sm,borderRadius:"5px","&:disabled":{cursor:"not-allowed",color:a.colorScheme==="dark"?a.colors.gray[4]:a.colors.gray[8],backgroundColor:a.colorScheme==="dark"?a.colors.dark[6]:a.colors.gray[4]},"&[data-active]":{background:"linear-gradient(45deg, #4c6ef5 0%, #15aabf 100%)",borderColor:a.colors.blue[7],color:a.white,boxShadow:"0 10px 20px -10px rgba(0,0,0,0.5)"}},tabsList:{overflowX:"auto"},panel:{}}),...n})}const b=[{index:1,label:"Pilih Jalur PPDB",icon:F,content:t.jsx(M,{type:"PENGEMBALIAN"})},{index:2,label:"Transaksi Pengembalian",icon:T,content:t.jsx(G,{type:"PENGEMBALIAN"})},{index:3,label:"Isi Biodata",icon:_,content:t.jsx("div",{children:"Isi biodata"})},{index:4,label:"Isi Data Prestasi",icon:w,content:t.jsx("div",{children:"Isi biodata"})},{index:5,label:"Cetak Kartu Peserta",icon:A,content:t.jsx($,{type:"PENGEMBALIAN"})}],V=()=>{var p;const[n,a]=x.useState({step:1,stagingId:null}),{data:i,isLoading:u,isSuccess:d}=P({queryKey:["get_last_offset_batch"],queryFn:()=>D("PENGEMBALIAN"),staleTime:0}),r=L(n),l=I(),c=h();x.useEffect(()=>{a(r==null?void 0:r.initialValues)},[r]),x.useEffect(()=>{if(d){const e=i.data.filter(s=>s.is_done===1);if(e.length>0){if(i.data[i.data.length-1].index!==e[e.length-1].index){const s=e[e.length-1].index+1,o={step:s,stagingId:i.data.find(S=>S.index===s).id};a(o),c(`${l.pathname}?${g(o)}`)}}else{const s={step:1,stagingId:i.data.find(o=>o.index===1).id};a(s),c(`${l.pathname}?${g(s)}`)}}},[i,d]);const f=e=>{const s={step:+e,stagingId:i.data.find(o=>o.index===+e).id};c(`${l.pathname}?${g(s)}`)};return t.jsxs(j,{title:"Pengembalian",children:[t.jsx(m,{label:"Pengembalian"}),t.jsx(k,{className:"style-box",children:t.jsxs(z,{value:`${n.step}`,onTabChange:f,children:[u&&t.jsx(N,{width:"100%"}),d&&t.jsx(B,{activeTabIndex:+n.step,card:i.data.map((e,s)=>{var o;return{label:e.name,index:e.index,icon:(o=b[s])==null?void 0:o.icon,is_done:e.is_done===1}})}),t.jsx(v,{my:20}),(p=b.find(e=>e.index===n.step))==null?void 0:p.content]})}),t.jsx(E,{position:"top-center",reverseOrder:!1})]})};export{V as default};

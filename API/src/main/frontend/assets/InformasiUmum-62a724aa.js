import{k as S,j as e,aL as U,S as $,c as y,p as F,m as X,a as Y,aj as Z,aO as ee,aA as q,r as W,b as ae,l as E,B as z,P as se,f as w,T as R,aI as te,G as I,A as M,aM as ie,aN as ne,_ as v,aP as re,aD as le,aQ as L,N as pe,o as he,D as me}from"./index-c1683f52.js";import{T as oe}from"./tiptapInput-86dc94b1.js";import{T as xe}from"./tiptapOutput-bfdefc50.js";import{F as de}from"./Flex-5072689f.js";import{A,C as ce}from"./index.esm-11a21e8a.js";import"./index.esm-9951076c.js";import"./createReactComponent-7e6ec58e.js";import"./Tooltip-82c79980.js";import"./SimpleGrid-248c688e.js";const be=async s=>(await S.post("/v1/admin/registration-info/post",s)).data,ge=async s=>(await S.delete("/v1/admin/registration-info/delete?id="+s.id)).data,je=async s=>{const{description:t,idKeterangan:c,index:b,name:a}=s,m={description:t,index:b,name:a};return(await S.patch("/v1/admin/registration-info/update?id="+c,m)).data},ye=async s=>(await S.get("/v1/admin/registration-info/index?regisPathsId="+s)).data,ke=({opened:s,close:t,titleModal:c,description:b,setDescription:a,name:m,setName:j,tambahKeteranganHandler:T,loading:d})=>e.jsx(U,{size:"60rem",onClose:t,opened:s,title:c,onAccept:{acceptFn:T,titleAccept:"Tambah"},withFooter:!0,loading:d,children:e.jsxs($,{mt:"3rem",mb:"6rem",sx:{paddingInline:"2rem",minHeight:"50vh"},children:[e.jsx(y,{align:"left",weight:"bold",children:"Nama"}),e.jsx(F,{value:m,onChange:o=>j(o.target.value)}),e.jsx(y,{align:"left",mt:30,weight:"bold",children:"Deskripsi Keterangan"}),e.jsx(oe,{desc:b,setDesc:a})]})}),De=({opened:s,close:t,titleModal:c,description:b,setDescription:a,name:m,setName:j,editKeteranganHandler:T,loading:d})=>e.jsx(U,{size:"70rem",onClose:t,opened:s,title:c,onAccept:{acceptFn:T,titleAccept:"Ubah"},withFooter:!0,loading:d,children:e.jsxs($,{p:20,pb:"6rem",mt:"3rem",children:[e.jsx(y,{align:"left",weight:"bold",children:"Nama"}),e.jsx(F,{value:m,onChange:o=>j(o.target.value)}),e.jsx(y,{align:"left",mt:30,weight:"bold",children:"Deskripsi Keterangan"}),e.jsx(oe,{desc:b,setDesc:a})]})}),ve=()=>{var _;const s=X(),t=Y(),c=Z(),{idJalurPendaftaran:b}=ee(),[a,{open:m,close:j}]=q(!1),[T,{open:d,close:o}]=q(!1),[k,{open:x,close:C}]=q(!1),[u,g]=W.useState(null),[B,p]=W.useState(""),[P,K]=W.useState(""),{data:f}=ae({queryKey:["get_all_keterangan"],queryFn:()=>ye(+b)}),Q=E({mutationFn:be}),N=E({mutationFn:ge}),O=E({mutationFn:je}),J=r=>{Q.mutate(r,{onSuccess:l=>{p(""),K(""),j(),v.success("Data berhasil ditambahkan"),c.invalidateQueries({queryKey:["get_all_keterangan"]})},onError:l=>{var H;((H=l==null?void 0:l.response)==null?void 0:H.status)===400&&v.error("Data tidak boleh kosong")}})},V=r=>{N.mutate(r,{onSuccess:l=>{p(""),g(null),v.success("Data berhasil dihapus"),c.invalidateQueries({queryKey:["get_all_keterangan"]}),C()},onError:l=>{}})},G=r=>{O.mutate(r,{onSuccess:l=>{g(null),p(""),K(""),o(),v.success("Data berhasil diubah"),c.invalidateQueries({queryKey:["get_all_keterangan"]})},onError:l=>{var H;((H=l==null?void 0:l.response)==null?void 0:H.status)===400&&v.error("Data tidak boleh kosong")}})};function n(){const r={description:P,index:"1",name:B,path_id:+b};J(r)}function i(r){V({id:r})}function D(){G({name:B,description:P,idKeterangan:u,index:"1"})}function h({propss:r,data:l}){return e.jsxs(ce,{children:[e.jsx(A.Control,{...r,className:"font-bold"}),e.jsxs("div",{style:{paddingInline:"16px",display:"flex",gap:"8px"},children:[e.jsx(M,{variant:"filled",className:"bg-[#2A166F] hover:bg-[#2A166F]",size:40,radius:100,onClick:()=>{d(),g(l.id),p(l.name),K(l.description)},children:e.jsx(ie,{size:20})}),e.jsx(M,{variant:"filled",color:"#2A166F",className:"bg-[#2A166F] hover:bg-[#2A166F]",size:40,radius:100,onClick:()=>{x(),g(l.id),p(l.name)},children:e.jsx(ne,{size:20})})]})]})}return e.jsxs(z,{sx:{flex:"1"},children:[e.jsx(se,{withBorder:!0,shadow:"sm",radius:"4rem",px:"2.5rem",py:"1rem",bg:s?t.colors.dark[8]:"white",children:e.jsxs(de,{justify:"space-between",align:"center",children:[e.jsx(y,{weight:"bold",size:"xl",children:"Keterangan"}),e.jsx(w,{onClick:m,children:"Tambah"})]})}),(f==null?void 0:f.data)&&((_=f==null?void 0:f.data)==null?void 0:_.length)>0&&e.jsx(A,{multiple:!0,variant:"separated",chevronPosition:"left",mt:30,mb:50,children:f&&f.data.sort((r,l)=>r.id-l.id).map(r=>e.jsxs(A.Item,{mb:15,value:r.id.toString(),sx:{boxShadow:"0 4px 10px -6px black",backgroundColor:`${s?t.colors.dark[9]:"white"}`,padding:"0.5rem 0.5rem",border:"0.0625rem solid #dee2e6","&[data-active]":{backgroundColor:s?t.colors.dark[9]:"white",border:"0.0625rem solid #dee2e6"}},children:[e.jsx(h,{propss:{id:"item.id.toString()",children:e.jsx(R,{order:3,children:r.name})},data:r}),e.jsx(A.Panel,{sx:{borderTop:`1px solid ${s?"gray":"#d9d9d9"}`},children:e.jsx(xe,{desc:r.description})})]},r.id))}),e.jsx(ke,{close:()=>{j(),g(null),p(""),K("")},description:P,opened:a,setDescription:K,setName:p,tambahKeteranganHandler:n,titleModal:"Tambah Keterangan",name:B,loading:Q.status==="pending"}),e.jsx(De,{close:()=>{o(),g(null),p(""),K("")},description:P,editKeteranganHandler:D,name:B,opened:T,setDescription:K,setName:p,titleModal:"Ubah Keterangan",loading:O.status==="pending"}),e.jsxs(te,{centered:!0,closeOnEscape:!1,closeOnClickOutside:!1,withCloseButton:!1,opened:k,onClose:()=>{C(),p(""),g(null)},children:[e.jsx(R,{order:3,children:"Hapus keterangan"}),e.jsxs(y,{mt:20,children:["Anda yakin ingin menghapus keterangan ",B]}),e.jsxs(I,{mt:20,position:"right",children:[e.jsx(w,{disabled:N.status==="pending",variant:"outline",onClick:()=>{C(),p(""),g(null)},children:"Batal"}),e.jsx(w,{variant:"danger",onClick:()=>i(u),loading:N.status==="pending",children:"Hapus"})]})]})]})},Ce=async s=>(await S.post("/v1/admin/additional-prices/post",s)).data,we=async s=>(await S.delete("/v1/admin/additional-prices/delete?id="+s.id)).data,Te=async s=>{const{namePrice:t,id:c,priceDetails:b}=s,a={namePrice:t,priceDetails:b};return(await S.patch("/v1/admin/additional-prices/update?id="+c,a)).data},Be=async s=>(await S.get("/v1/admin/additional-prices/index?pathId="+s)).data,fe=({opened:s,close:t,titleModal:c,tambahBiayaTambahanHandler:b,form:a,loading:m})=>{const j=a.values.priceDetails.map((d,o)=>e.jsxs(z,{children:[e.jsxs(y,{weight:"bold",sx:{flex:1},children:["Nama ",o+1]}),e.jsxs(I,{mt:"xs",children:[e.jsx(F,{placeholder:`Gelombang ${o+1}`,required:!0,withAsterisk:!0,sx:{flex:1},...a.getInputProps(`priceDetails.${o}.name`)}),o>0&&e.jsx(M,{color:"red",variant:"filled",size:30,onClick:()=>a==null?void 0:a.removeListItem("priceDetails",o),children:e.jsx(re,{size:"1rem"})})]}),e.jsxs(y,{weight:"bold",sx:{flex:1},mt:"xs",children:["Biaya ",o+1]}),e.jsx(le,{mt:"xs",thousandSeparator:".",required:!0,decimalSeparator:",",prefix:"Rp. ",customInput:F,placeholder:"Rp. 0",sx:{flex:1},withAsterisk:!0,...a.getInputProps(`priceDetails.${o}.biaya`)})]},d.key));function T(d){const{priceDetails:o,judulBiaya:k}=d,x=o.map(C=>({subTitle:C.name,price:C.biaya.substring(4).replace(/\./g,"")}));b({namePrice:k,priceDetails:x})}return e.jsx(U,{size:"50rem",onClose:t,opened:s,title:c,withFooter:!1,children:e.jsxs("form",{onSubmit:a.onSubmit(d=>T(d)),children:[e.jsxs($,{p:20,pb:"6rem",sx:{minHeight:"50vh"},spacing:"2rem",children:[e.jsxs(z,{children:[e.jsx(y,{align:"left",weight:"bold",children:"Judul Biaya"}),e.jsx(F,{mt:"xs",required:!0,...a.getInputProps("judulBiaya")})]}),j,e.jsx(I,{position:"center",mt:"md",children:e.jsx(w,{onClick:()=>a.insertListItem("priceDetails",{name:"",biaya:"",key:L()}),children:"Tambah Biaya"})})]}),e.jsxs(I,{position:"right",sx:d=>({position:"absolute",bottom:0,right:0,left:0,padding:"1rem 4rem",backgroundColor:d.colorScheme==="dark"?"black":"whitesmoke",zIndex:1}),children:[e.jsx(w,{variant:"outline",onClick:()=>{t()},disabled:m,children:"Batal"}),e.jsx(w,{type:"submit",loading:m,children:"Tambah"})]})]})})},Ke=({opened:s,close:t,titleModal:c,editBiayaTambahanHandler:b,form:a,loading:m})=>{var d,o;const j=(o=(d=a==null?void 0:a.values)==null?void 0:d.priceDetails)==null?void 0:o.map((k,x)=>e.jsxs(z,{children:[e.jsxs(y,{weight:"bold",sx:{flex:1},children:["Nama ",x+1]}),e.jsxs(I,{mt:"xs",children:[e.jsx(F,{placeholder:`Gelombang ${x+1}`,required:!0,withAsterisk:!0,sx:{flex:1},...a==null?void 0:a.getInputProps(`priceDetails.${x}.name`)}),x>0&&e.jsx(M,{color:"red",variant:"filled",size:30,onClick:()=>a==null?void 0:a.removeListItem("priceDetails",x),children:e.jsx(re,{size:"1rem"})})]}),e.jsxs(y,{weight:"bold",sx:{flex:1},mt:"xs",children:["Biaya ",x+1]}),e.jsx(le,{mt:"xs",thousandSeparator:".",required:!0,decimalSeparator:",",prefix:"Rp. ",customInput:F,placeholder:"Rp. 0",sx:{flex:1},withAsterisk:!0,...a==null?void 0:a.getInputProps(`priceDetails.${x}.biaya`)})]},k.key));function T(k){const{priceDetails:x,judulBiaya:C,id:u}=k,g=x.map(B=>{var p;return{subTitle:B.name,price:(p=B.biaya)==null?void 0:p.substring(4).replace(/\./g,"")}});b({id:u,namePrice:C,priceDetails:g})}return e.jsx(U,{size:"50rem",onClose:t,opened:s,title:c,withFooter:!1,children:e.jsxs("form",{onSubmit:a==null?void 0:a.onSubmit(k=>T(k)),children:[e.jsxs($,{p:20,pb:"6rem",sx:{minHeight:"50vh"},spacing:"2rem",children:[e.jsxs(z,{children:[e.jsx(y,{align:"left",weight:"bold",children:"Judul Biaya"}),e.jsx(F,{mt:"xs",required:!0,...a==null?void 0:a.getInputProps("judulBiaya")})]}),j&&j,e.jsx(I,{position:"center",mt:"md",children:e.jsx(w,{onClick:()=>a==null?void 0:a.insertListItem("priceDetails",{name:"",biaya:"",key:L()}),children:"Tambah Biaya"})})]}),e.jsxs(I,{position:"right",sx:k=>({position:"absolute",bottom:0,right:0,left:0,padding:"1rem 4rem",backgroundColor:k.colorScheme==="dark"?"black":"whitesmoke",zIndex:1}),children:[e.jsx(w,{variant:"outline",onClick:()=>{t()},disabled:m,children:"Batal"}),e.jsx(w,{type:"submit",loading:m,children:"Ubah"})]})]})})},Ae=()=>{var G;const s=X(),t=Y(),{idJalurPendaftaran:c}=ee(),[b,{open:a,close:m}]=q(!1),[j,{open:T,close:d}]=q(!1),[o,{open:k,close:x}]=q(!1),C=Z(),u=pe({initialValues:{id:0,judulBiaya:"",priceDetails:[{name:"",biaya:"",key:L()}]}}),{data:g}=ae({queryKey:["get_all_biaya_tambahan"],queryFn:()=>Be(+c)}),B=E({mutationFn:Ce}),p=E({mutationFn:we}),P=E({mutationFn:Te}),K=n=>{B.mutate(n,{onSuccess:()=>{m(),v.success("Data berhasil dtambahkan"),u.reset(),C.invalidateQueries({queryKey:["get_all_biaya_tambahan"]})},onError:i=>{var h;((h=i==null?void 0:i.response)==null?void 0:h.status)===400&&v.error("Data tidak boleh kosong"),v.error("Gagal menambah data")}})},f=n=>{p.mutate(n,{onSuccess:()=>{x(),v.success("Data berhasil dihapus"),C.invalidateQueries({queryKey:["get_all_biaya_tambahan"]}),u.reset()},onError:()=>{v.error("Gagal mengubah data")}})},Q=n=>{P.mutate(n,{onSuccess:()=>{d(),v.success("Data berhasil diubah"),u.reset(),C.invalidateQueries({queryKey:["get_all_biaya_tambahan"]})},onError:i=>{var h;((h=i==null?void 0:i.response)==null?void 0:h.status)===400&&v.error("Data tidak boleh kosong"),v.error("Gagal mengubah data")}})};function N(n){const{namePrice:i,priceDetails:D}=n,h=D.map(r=>({subTitle:r.subTitle,price:+r.price})),_={namePrice:i,path_id:+c,priceDetails:h};K(_)}function O(n){f({id:n})}function J(n){const{id:i,namePrice:D,priceDetails:h}=n,_=h.map(l=>({subTitle:l.subTitle,price:+l.price}));Q({id:i,namePrice:D,priceDetails:_})}function V({propss:n,data:i}){return e.jsxs(ce,{children:[e.jsx(A.Control,{...n,className:"font-bold"}),e.jsxs("div",{style:{paddingInline:"16px",display:"flex",gap:"8px"},children:[e.jsx(M,{variant:"filled",className:"bg-[#2A166F] hover:bg-[#2A166F]",size:40,radius:100,onClick:()=>{const D=i==null?void 0:i.priceDetails.map(h=>({name:h.subTitle,biaya:`Rp. ${h.price}`,key:L()}));u.setValues({id:i.id,judulBiaya:i.namePrice,priceDetails:D}),T()},children:e.jsx(ie,{size:20})}),e.jsx(M,{variant:"filled",color:"#2A166F",className:"bg-[#2A166F] hover:bg-[#2A166F]",size:40,radius:100,onClick:()=>{k(),u.setValues({id:i.id,judulBiaya:i.namePrice})},children:e.jsx(ne,{size:20})})]})]})}return e.jsxs(z,{sx:{flex:"1"},children:[e.jsx(se,{withBorder:!0,shadow:"sm",radius:"4rem",px:"2.5rem",bg:s?t.colors.dark[8]:"white",sx:{padding:"1rem"},children:e.jsxs(de,{justify:"space-between",align:"center",children:[e.jsx(y,{weight:"bold",size:"xl",children:"Biaya Tambahan"}),e.jsx(w,{onClick:a,children:"Tambah"})]})}),e.jsx(A,{mt:30,mb:50,multiple:!0,variant:"separated",chevronPosition:"left",children:g&&((G=g==null?void 0:g.data)==null?void 0:G.sort((n,i)=>n.id-i.id).map(n=>{const i=n.priceDetails;return e.jsxs(A.Item,{mb:15,value:n.id.toString(),sx:{boxShadow:"0 4px 10px -6px black",backgroundColor:`${s?t.colors.dark[9]:"white"}`,padding:"0.5rem 0.5rem",border:"0.0625rem solid #dee2e6","&[data-active]":{backgroundColor:s?t.colors.dark[9]:"white",border:"0.0625rem solid #dee2e6"}},children:[e.jsx(V,{propss:{id:n.id.toString(),children:e.jsx(R,{order:3,children:n.namePrice})},data:n}),e.jsx(A.Panel,{sx:{borderTop:`1px solid ${s?"gray":"#d9d9d9"}`},children:e.jsx("table",{className:"w-full text-left  p-5",children:e.jsx("tbody",{children:i.map(D=>{const h=D.price;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-4",children:D.subTitle}),e.jsx("td",{children:h==null?void 0:h.toLocaleString("id-ID",{style:"currency",currency:"IDR"}).slice(0,-3)})]},D.id)})})})})]},n.id)}))}),e.jsx(fe,{form:u,close:()=>{m(),u.reset()},opened:b,tambahBiayaTambahanHandler:N,titleModal:"Tambah Biaya Tambahan",loading:B.status==="pending"}),e.jsx(Ke,{form:u,opened:j,close:()=>{d(),u.reset()},editBiayaTambahanHandler:J,titleModal:"Ubah Biaya Tambahan",loading:P.status==="pending"}),e.jsxs(te,{centered:!0,closeOnEscape:!1,closeOnClickOutside:!1,withCloseButton:!1,opened:o,onClose:()=>{x(),u.reset()},children:[e.jsx(R,{order:3,children:"Hapus Biaya Tambahan"}),e.jsxs(y,{mt:20,children:["Anda yakin ingin menghapus biaya tambahan ",u.values.judulBiaya,"?"]}),e.jsxs(I,{mt:20,position:"right",children:[e.jsx(w,{disabled:p.status==="pending",variant:"outline",onClick:()=>{x(),u.reset()},children:"Batal"}),e.jsx(w,{variant:"danger",onClick:()=>O(u.values.id),loading:p.status==="pending",children:"Hapus"})]})]})]})},Ne=()=>e.jsx(he,{title:"Informasi Umum",children:e.jsxs($,{children:[e.jsx(ve,{}),e.jsx(me,{}),e.jsx(Ae,{})]})});export{Ne as default};
